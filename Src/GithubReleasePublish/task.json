{
  "id": "0E54B1DE-2C34-4ACD-B93D-0FA1B9730BBE",
  "name": "GitHubReleasePublish",
  "friendlyName": "Create GitHub Release",
  "description":
    "Create and publish GitHub Release and upload assets, checking manifest content",
  "author": "Marcelo Forment√£o",
  "helpMarkDown":
    "[More Information](https://github.com/marceloavf/github-tools-vsts)",
  "category": "Utility",
  "version": {
    "Major": 0,
    "Minor": 0,
    "Patch": 0
  },
  "demands": ["npm", "gulp"],
  "instanceNameFormat": "Create GitHub Release",
  "inputs": [
    {
      "name": "githubEndpoint",
      "type": "connectedService:github",
      "label": "GitHub connection",
      "defaultValue": "",
      "required": true,
      "helpMarkDown":
        "Select the service endpoint for your GitHub connection. <br>To create one, click the Manage link and create a new service endpoint."
    },
    {
      "name": "manifestJson",
      "type": "filePath",
      "label": "Package.json",
      "defaultValue": "",
      "helpMarkDown":
        "File from which default values will be extracted if options are missing."
    },
    {
      "name": "githubRepository",
      "type": "pickList",
      "label": "Repository",
      "defaultValue": "",
      "helpMarkDown":
        "Name of the GitHub repository. <br>If empty, it will be extracted from <strong>package.json</strong> (the repository.url field).",
      "properties": {
        "DisableManageLink": "True"
      }
    },
    {
      "name": "githubTag",
      "type": "string",
      "label": "Tag",
      "defaultValue": "v$(Build.BuildNumber)",
      "helpMarkDown":
        "Tag to release, value should be <strong>v$(Build.BuildNumber)</strong> for release current build, for example: v1.0.0. <br>If empty, the version will be extracted from <strong>package.json</strong> and prepended by a 'v'."
    },
    {
      "name": "githubReleaseTitle",
      "type": "string",
      "label": "Release title",
      "defaultValue": "v$(Build.BuildNumber)",
      "helpMarkDown":
        "Release title. <br>If empty, it will be the same as the tag."
    },
    {
      "name": "githubReleaseNotes",
      "type": "multiLine",
      "label": "Release notes",
      "defaultValue": "",
      "helpMarkDown":
        "Release notes. <br>If missing it will be left undefined.",
      "properties": {
        "resizable": "true",
        "rows": "2"
      }
    },
    {
      "name": "githubReleaseDraft",
      "type": "boolean",
      "label": "Release as Draft",
      "defaultValue": "true",
      "required": true,
      "helpMarkDown": "Release as Draft"
    },
    {
      "name": "githubReleasePrerelease",
      "type": "boolean",
      "label": "Release as Pre-release",
      "defaultValue": "false",
      "required": true,
      "helpMarkDown": "Release tagged as Pre-release"
    },
    {
      "name": "githubReleaseAsset",
      "type": "filePath",
      "label": "File to upload as asset",
      "required": true,
      "helpMarkDown": "The file to upload as artifacts to the release."
    }
  ],
  "sourceDefinitions": [
    {
      "target": "githubRepository",
      "endpoint":
        "/$(system.teamProject)/_apis/sourceProviders/GitHub/repositories?serviceEndpointId=$(githubEndpoint)",
      "selector": "jsonpath:$.value[*].id",
      "keySelector": "jsonpath:$.value[*].id",
      "authKey": "tfs:teamfoundation"
    }
  ],
  "execution": {
    "Node": {
      "target": "githubReleasePublish.js",
      "argumentFormat": ""
    }
  }
}
